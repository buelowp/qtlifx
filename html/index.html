<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Qt LIFX: Qt LIFX Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Qt LIFX
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Qt LIFX Library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A comprehensive Qt5 based LIFX accessor library. The goal is to allow for simple API based access to all LIFX bulbs on a single network. This library uses the broadcast UDP solution published by LIFX linked below.</p>
<p>This library is a simple asynchronous solution with a defined API. You can get and set bulb details individually or by group. You can change bulb colors independently or by group. Bulb discovery is automatic, and stateless. Once a bulb has been discovered and the newBulbAvailable signal has been published, the bulb can be used by the application.</p>
<p>This library provides a full abstraction. You don't need to know anything about the bulbs or network to use it. Simply wire up the signals/slots to your code, and call initialize().</p>
<p>The purpose of this library is simply to allow me to run a Christmas display that has both LIFX and Hue bulbs. There are currently some apps on phones/tablets than can do this, but getting both at the same time is complicated, expensive, and honestly, doesn't work as well as I would like. I have both types of bulbs around my house, so being able to use them for displays is a priority for me.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
BUILD</h1>
<div class="fragment"><div class="line">git clone github.com:buelow/qtlifx.git</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ..</div>
<div class="line">make</div>
<div class="line">make install</div>
</div><!-- fragment --><p>To use this in your library, simple add qtlifx to your link step</p>
<h1><a class="anchor" id="autotoc_md2"></a>
HOWTO</h1>
<p>Find the Doxygen documentation at <a href="https://buelowp.github.io/qtlifx/">https://buelowp.github.io/qtlifx/</a></p>
<p>See the example main.cpp in the examples directory, but it's pretty simple to use.</p>
<div class="fragment"><div class="line">LifxManager *manager = new LifxManager();</div>
<div class="line">connect(manager, &amp;LifxManager::newBulbAvailable, this, &amp;Class::handleNewBulb);</div>
<div class="line">connect(manager, &amp;LifxManager::bulbDiscoveryFinished, this, &amp;Class::handleEndOfDiscovery);</div>
<div class="line">manager-&gt;initialize();</div>
</div><!-- fragment --><p>Once you have received the bulbDiscoveryFinished(bulb) signal, that bulb has completed discovery and can be queried or set as needed. If you choose to provide the product definitions (see below), then each bulb includes all of the LIFX capabilities. Otherwise, some functions may not work as the lights are not assumed to support them by default.</p>
<div class="fragment"><div class="line">QFile file(&quot;products.json&quot;);</div>
<div class="line">if (!file.open())</div>
<div class="line">    handle_error()</div>
<div class="line">QByteArray json = file.readAll();</div>
<div class="line">QJsonDocument doc = QJsonDocument::fromJson(json);</div>
<div class="line">if (doc.isObject())</div>
<div class="line">    manager-&gt;setProductCapabilities(doc);</div>
</div><!-- fragment --><p>The entirety of this library revolves around two objects, the manager and a bulb. The manager is created by the application, and is what does the work. The bulb is the complete code representation of a LIFX product. Each of these should be treated as immutable and owned completely by the library.</p>
<ul>
<li>Do not delete a <a class="el" href="classLifxBulb.html" title="(PUBLIC) Container/controller class for a LIFX bulb">LifxBulb</a> in your code, bad things will happen.</li>
<li>Do not try to change the contents of the maps, bad things will happen.</li>
</ul>
<p>It is possible to query for bulbs in a variety of ways, and you can talk to them using a pointer to the object, the bulb name, the bulb group name, the bulb group UUID, and the bulb MAC address.</p>
<p>The LAN API is documented at <a href="https://lan.developer.lifx.com/docs/introduction">https://lan.developer.lifx.com/docs/introduction</a></p>
<h1><a class="anchor" id="autotoc_md3"></a>
PRODUCT</h1>
<p>LIFX provides a JSON document with all of their products identified by VID/PID. This document is pretty critical to a fully functioning library as each product has some caveats about what it can support versus what it cannot. The most important distinction is that some bulbs have different Kelvin min/max values. Without that decoded, the default is much smaller than what is possible, and you may lose some capabilities when trying to communicate with your bulbs.</p>
<p>It is possible to set product capabilities prior to running initialize() or after. However, if done after, you will need to accept that getting a newBulbAvailable() signal does not mean the bulb is ready to use. It <em>can</em> be used, but it will be lacking it's full potential capabilities.</p>
<p>You can get the products.json file from <a href="https://github.com/LIFX/products">https://github.com/LIFX/products</a></p>
<h1><a class="anchor" id="autotoc_md4"></a>
CODE</h1>
<p>I did as much as possible to provide helpers where that made sense to me at least. There is an <a class="el" href="classHSBK.html" title="An HSBK container class with helper functions for direct use of the LIFX color scheme.">HSBK</a> object which allows for easy set and go for a set of colors, or to create a color in the native LIFX format. Things like Red (360), Yellow (120), etc are based on the color wheel precentages. Orange is approximiation. The white values included are roughly tuned to the app, as I got them from the app directly. So, neutral here is the same as neutral in the app.</p>
<p>It is possible to write your own manager, this code does nothing to stop that. But it's structured to provide a simple clean solution, and avoid having to do the lifting on your own.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
RELEASE</h1>
<ul>
<li>ALPHA: Currently at alpha quality, and not ready for normal usage</li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
NOTES</h1>
<ul>
<li>It does work on the Pi just fine, I'm using it that way now</li>
<li>The API is still very early in development. It works for me, I don't know that it will work for anyone else ATM. I'll publish a release when I think it's ready.</li>
<li>This is a LAN library, and only works when local to the bulbs. It cannot be used outside the home network the bulbs are on.</li>
<li>This library does not support zones or tiles yet. That may come in the future, but for now, I don't have any to test against.</li>
<li>The get/set API is incomplete still, and does not support a lot of the set functions provided by the LIFX API.<ul>
<li>e.g. reboot/set label/set group.</li>
</ul>
</li>
<li>There is no push notifications here, the lights won't tell us if someone else changes them.<ul>
<li>One solution is to query the lights every now and then to ask what's going on. </li>
</ul>
</li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
